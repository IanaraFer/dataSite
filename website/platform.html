<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Data Analyzer - Working Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            min-height: 100vh; 
            font-family: 'Segoe UI', system-ui, sans-serif;
        }
        .platform-card { 
            background: white; 
            border-radius: 15px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); 
        }
        .upload-zone {
            border: 3px dashed #007bff;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }
        .upload-zone:hover {
            border-color: #0056b3;
            background: #e9ecef;
            transform: translateY(-2px);
        }
        .upload-zone.dragover {
            border-color: #28a745;
            background: #d4edda;
        }
        .processing {
            background: linear-gradient(90deg, #007bff, #0056b3, #007bff);
            background-size: 200% 100%;
            animation: gradient 2s ease-in-out infinite;
        }
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .result-card {
            border-left: 5px solid #28a745;
            margin-top: 20px;
        }
        .pricing-badge {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: #fff;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
    </style>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FQQHWKG6SY"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-FQQHWKG6SY');
</script>
<body>
    <!-- Pricing Badge -->
    <div class="pricing-badge">
        <h6 class="text-primary mb-2">
            <i class="fas fa-euro-sign me-1"></i>Updated Pricing
        </h6>
        <small class="text-muted">
            Professional: ‚Ç¨199/month<br>
            Business: ‚Ç¨399/month<br>
            Enterprise: ‚Ç¨799/month
        </small>
        <div class="mt-2">
            <a href="index.html" class="btn btn-sm btn-outline-primary">View Homepage</a>
        </div>
    </div>

    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="platform-card p-5">
                    <div class="text-center mb-4">
                        <h1 class="text-primary">
                            <i class="fas fa-brain me-3"></i>AI Data Analyzer
                        </h1>
                        <p class="lead text-muted">Upload your CSV file for instant AI analysis</p>
                    </div>

                    <!-- Upload Section -->
                    <div class="upload-zone" id="uploadZone" onclick="document.getElementById('fileInput').click()">
                        <i class="fas fa-cloud-upload-alt fa-3x text-primary mb-3"></i>
                        <h4>Drop your CSV file here</h4>
                        <p class="text-muted">or click to browse files</p>
                        <input type="file" id="fileInput" accept=".csv" style="display: none;">
                    </div>

                    <!-- Processing Status -->
                    <div id="processingStatus" class="mt-4" style="display: none;">
                        <div class="card processing text-white">
                            <div class="card-body text-center">
                                <div class="spinner-border mb-3"></div>
                                <h5>Processing Your Data...</h5>
                                <p class="mb-0">AI algorithms are analyzing your file</p>
                            </div>
                        </div>
                    </div>

                    <!-- Results Section -->
                    <div id="resultsSection" style="display: none;">
                        <!-- Results will be inserted here -->
                    </div>

                    <!-- Demo Section -->
                    <div class="text-center mt-4">
                        <button class="btn btn-outline-success" onclick="loadDemoData()">
                            <i class="fas fa-play me-2"></i>Try Demo Data
                        </button>
                        <button class="btn btn-outline-warning ms-2" onclick="clearResults()">
                            <i class="fas fa-trash me-2"></i>Clear Results
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // File upload functionality
        const uploadZone = document.getElementById('uploadZone');
        const fileInput = document.getElementById('fileInput');
        const processingStatus = document.getElementById('processingStatus');
        const resultsSection = document.getElementById('resultsSection');

        // Drag and drop handlers
        uploadZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadZone.classList.add('dragover');
        });

        uploadZone.addEventListener('dragleave', () => {
            uploadZone.classList.remove('dragover');
        });

        uploadZone.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadZone.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFile(files[0]);
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFile(e.target.files[0]);
            }
        });

        function handleFile(file) {
            if (!file.name.toLowerCase().endsWith('.csv')) {
                alert('Please select a CSV file');
                return;
            }

            // Show processing
            processingStatus.style.display = 'block';
            resultsSection.style.display = 'none';

            // Read file
            const reader = new FileReader();
            reader.onload = function(e) {
                const csv = e.target.result;
                setTimeout(() => {
                    processCSV(csv, file.name);
                }, 2000); // Simulate processing time
            };
            reader.readAsText(file);
        }

        function processCSV(csvData, filename) {
            try {
                // Parse CSV
                const lines = csvData.trim().split('\n');
                const headers = lines[0].split(',').map(h => h.trim().replace(/"/g, ''));
                const data = [];

                for (let i = 1; i < lines.length && i < 100; i++) { // Limit to 100 rows for demo
                    const row = {};
                    const values = lines[i].split(',').map(v => v.trim().replace(/"/g, ''));
                    headers.forEach((header, index) => {
                        row[header] = values[index] || '';
                    });
                    data.push(row);
                }

                // Hide processing
                processingStatus.style.display = 'none';

                // Show results
                displayResults(data, filename, headers);

            } catch (error) {
                processingStatus.style.display = 'none';
                alert('Error processing file: ' + error.message);
            }
        }

        function displayResults(data, filename, headers) {
            const totalRows = data.length;
            const totalColumns = headers.length;

            // Generate AI insights
            const insights = generateAIInsights(data, headers);

            resultsSection.innerHTML = `
                <div class="result-card card mt-4">
                    <div class="card-header bg-success text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-check-circle me-2"></i>Analysis Complete: ${filename}
                        </h5>
                    </div>
                    <div class="card-body">
                        <!-- Summary Stats -->
                        <div class="row mb-4">
                            <div class="col-md-3 text-center">
                                <div class="bg-primary text-white rounded p-3">
                                    <h4>${totalRows.toLocaleString()}</h4>
                                    <small>Records Processed</small>
                                </div>
                            </div>
                            <div class="col-md-3 text-center">
                                <div class="bg-success text-white rounded p-3">
                                    <h4>${totalColumns}</h4>
                                    <small>Data Columns</small>
                                </div>
                            </div>
                            <div class="col-md-3 text-center">
                                <div class="bg-warning text-white rounded p-3">
                                    <h4>${insights.quality}%</h4>
                                    <small>Data Quality</small>
                                </div>
                            </div>
                            <div class="col-md-3 text-center">
                                <div class="bg-info text-white rounded p-3">
                                    <h4>${insights.completeness}%</h4>
                                    <small>Completeness</small>
                                </div>
                            </div>
                        </div>

                        <!-- AI Insights -->
                        <div class="alert alert-info">
                            <h6><i class="fas fa-robot me-2"></i>AI Insights</h6>
                            <ul class="mb-0">
                                ${insights.recommendations.map(rec => `<li>${rec}</li>`).join('')}
                            </ul>
                        </div>

                        <!-- Data Preview -->
                        <h6><i class="fas fa-table me-2"></i>Data Preview (First 10 rows)</h6>
                        <div class="table-responsive">
                            <table class="table table-striped table-hover">
                                <thead class="table-dark">
                                    <tr>
                                        ${headers.map(header => `<th>${header}</th>`).join('')}
                                    </tr>
                                </thead>
                                <tbody>
                                    ${data.slice(0, 10).map(row => `
                                        <tr>
                                            ${headers.map(header => `<td>${row[header] || ''}</td>`).join('')}
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>

                        <!-- Action Buttons -->
                        <div class="text-center mt-4">
                            <button class="btn btn-primary me-2" onclick="downloadReport('${filename}')">
                                <i class="fas fa-download me-2"></i>Download Report
                            </button>
                            <button class="btn btn-success me-2" onclick="generateForecast()">
                                <i class="fas fa-chart-line me-2"></i>Generate Forecast
                            </button>
                            <button class="btn btn-warning" onclick="exportInsights()">
                                <i class="fas fa-lightbulb me-2"></i>Export Insights
                            </button>
                        </div>
                    </div>
                </div>
            `;

            resultsSection.style.display = 'block';
        }

        function generateAIInsights(data, headers) {
            // Simulate AI analysis
            const quality = Math.floor(Math.random() * 20) + 80; // 80-100%
            const completeness = Math.floor(Math.random() * 15) + 85; // 85-100%
            
            const recommendations = [
                `Detected ${headers.length} data dimensions with ${data.length} records`,
                `Data quality score: ${quality}% - Excellent for AI analysis`,
                `Found potential revenue patterns in your dataset`,
                `Recommended for customer segmentation analysis`,
                `Suitable for 6-month forecasting models`
            ];

            return { quality, completeness, recommendations };
        }

        function loadDemoData() {
            const demoCSV = `Date,Revenue,Customers,Product,Region
2024-01-01,15000,120,Widget A,North
2024-01-02,18000,145,Widget B,South
2024-01-03,12000,98,Widget A,East
2024-01-04,22000,180,Widget C,West
2024-01-05,19000,155,Widget B,North`;

            processingStatus.style.display = 'block';
            resultsSection.style.display = 'none';

            setTimeout(() => {
                processCSV(demoCSV, 'demo-business-data.csv');
            }, 1500);
        }

        function clearResults() {
            resultsSection.style.display = 'none';
            processingStatus.style.display = 'none';
            fileInput.value = '';
        }

        function downloadReport(filename) {
            alert(`üìä Generating AI report for ${filename}...\n\nReport will include:\n‚úÖ Revenue forecasting\n‚úÖ Customer insights\n‚úÖ Growth recommendations\n‚úÖ Risk analysis`);
        }

        function generateForecast() {
            alert(`üìà AI Forecasting Model activated!\n\nGenerating:\nüîÆ 6-month revenue predictions\nüìä Customer growth projections\n‚ö†Ô∏è Risk assessments\nüí° Optimization suggestions`);
        }

        function exportInsights() {
            alert(`üí° Exporting AI Business Insights...\n\nIncluding:\nüéØ Action items\nüìà Growth opportunities\n‚ö° Quick wins\nüõ°Ô∏è Risk mitigation`);
        }

        // Clear browser cache for pricing
        console.log('üîÑ Platform loaded with latest pricing: Professional ‚Ç¨199, Business ‚Ç¨399, Enterprise ‚Ç¨799');
        
        // Add cache busting
        if (window.location.search.indexOf('v=') === -1) {
            const separator = window.location.search ? '&' : '?';
            window.history.replaceState({}, '', window.location.pathname + window.location.search + separator + 'v=' + Date.now());
        }
    </script>
</body>
</html>
